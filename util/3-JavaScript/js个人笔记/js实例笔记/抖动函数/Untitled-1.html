<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
img{position:absolute;left:300px;top:300px;width:150px;height:300px;}
</style>
</head>

<body>
<img src="1.jpg"/>
</body>
<script>
var oImg=document.getElementsByTagName('img')[0];

oImg.onclick = fnShake;

	
	function fnShake() {
		var _this = this;
		shake( _this, 'left', function(){
			shake( _this, 'top' );
		});
	}



function shake(obj,attr,endFn){
	var timer=null;
	var num=0;
	var arr=[];
	var pos=parseInt(getStyle(obj,attr));
	for(var i=20;i>0;i-=2){
		arr.push(i,-i);
		}
		arr.push(0);
		clearInterval(obj.shake);
		obj.shake=setInterval(function (){
			obj.style[attr]=pos+arr[num]+'px';
			num++;
			if(num==arr.length){
				clearInterval(obj.shake);
				endFn && endFn();
			}
			
			
			},50);
}

function getStyle(obj,attr){
	
	return obj.currentStyle?obj.currentStyle[attr]:getComputedStyle(obj)[attr];
}
//alert(getStyle(oImg,'width'));
</script>
</html>

<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
#div1{width:100px;height:100px;background:red;position:absolute;left:100px;top:100px;}
</style>
</head>

<body>
<div id="div1">

</div>
<script language="javascript">
/*	var oDiv=document.getElementById('div1');
	
	oDiv.onmousedown=function (ev){
		
		var ev=ev||window.event;
		disX=ev.clientX-this.offsetLeft;
		disY=ev.clientY-this.offsetTop;
		var leftMax=document.documentElement.clientWidth-oDiv.offsetWidth;
		var topMax=document.documentElement.clientHeight-oDiv.offsetHeight;
		
			document.onmousemove=function (ev){
			var ev=ev||window.event;
			var L=ev.clientX-disX;
			var T=ev.clientY-disY;
			
			if(L<0)
			L=0;
			else if(L>leftMax)
			L=leftMax;
			if(T<0)
			T=0;
			else if(T>topMax)
			T=topMax;
			
			
			oDiv.style.left=L+'px';
			oDiv.style.top=T+'px';	
		}
		
		document.onmouseup=function (){
			document.onmousemove=document.onmouseup=null;
		}
		
	}*/
	
	
	window.onload=function (){
		var d1 = new Drag();
	d1.init();
	};
	
	function  Drag(){
		
		this.oDiv=document.getElementById('div1');
		this.disX=0;
		this.disY=0;
		
	}
	
	Drag.prototype.init=function (){
		var This=this;
		this.oDiv.onmousedown=function (ev){
			var ev=ev||window.event;
			This.fnDown(ev);
			return false;
		}
		
	}
	
	Drag.prototype.fnDown=function (ev){
		
		var This=this;
		this.disX=ev.clientX-this.oDiv.offsetLeft;
		this.disY=ev.clientY-this.oDiv.offsetTop;
		document.onmousemove=function (ev){
		 	var ev=ev||window.event;
			This.fnMove(ev);	
		}
		document.onmouseup=this.fnUp;
	}
	
	Drag.prototype.fnMove=function(ev){
		
		this.oDiv.style.left = ev.clientX - this.disX + 'px';
	this.oDiv.style.top = ev.clientY - this.disY + 'px';
	}
	
	Drag.prototype.fnUp = function(){
	document.onmousemove = null;
	document.onmouseup = null;
};
</script>
</body>
</html>

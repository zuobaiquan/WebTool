<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>
          人人网笔试题
        </title>
        <!--[if lt IE 9]>
        <script src="../script/base.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="../common.css" type="text/style"/>
        <style>
          ol li{
            line-height: 1.5em;
          }
          ul{
            font-size: 100%;
            padding: 0;
            margin: 0;
          }

          /*滚动 相册样式*/
          .thumbs {
            overflow: hidden;
          }
          .thumbs ul {
            word-break: keep-all;
            white-space: nowrap;
            overflow: hidden;
            margin: auto;
            font-size: 1px;
            _width: expression(document.documentElement.clientWidth-280);
          }
          .thumbs li {
            list-style: none;
            display: inline;
          }
          .thumbs a {
            border: 2px solid #B7B7B7;
            text-decoration: none;
            display: inline-block;
            outline: none;
            margin: 0 9px;
          }
          .thumbs img {
            vertical-align: top;
            width: 115px;
            height: 85px;
          }
          .thumbs a:hover {
            border-color: #65B6DD;
          }
          .thumbs a:focus,
          .thumbs a:active {
            border-color: #0084B4;
          }
          .thumbs .scroll_left,
          .thumbs .scroll_right {
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
            font-family: SimHei;
            background: #65B6DD;
            text-align: center;
            line-height: 85px;
            overflow: hidden;
            font-size: 20px;
            cursor: pointer;
            height: 85px;
            width: 20px;
            color: #fff;
            behavior: url("PIE.htc");
          }
          .thumbs .scroll_left {
            -webkit-border-radius: 10px 3px 3px 10px;
               -moz-border-radius: 10px 3px 3px 10px;
                border-radius: 10px 3px 3px 10px;
            margin-right: 15px;
            float: left;
          }
          .thumbs .scroll_right {
            -webkit-border-radius: 3px 10px 10px 3px;
               -moz-border-radius: 3px 10px 10px 3px;
                border-radius: 3px 10px 10px 3px;
            margin-left: 15px;
            float: right;
          }
          * html .thumbs .scroll_left,
          * html .thumbs .scroll_right {
            _margin: 0;
          }
          .thumbs .disabled {
            cursor: not-allowed;
            background: #CCC;
            color: #999;
          }
          /*试题2 对话框*/
          #dialogbg {
            background: rgba(0,0,0,.2);
            overflow: hidden;
            position: fixed;
          }
          #dialogbg,
          #dialogbg .bgcolor {
            height: 100%;
            width: 100%;
            margin: 0;
            left: 0;
            top: 0;
          }
          #dialogbg .bgcolor {
            filter: alpha(opacity=20);
            background: #000;
            position: absolute;
          }
          :root #dialogbg .bgcolor {
            display: none;
          }
          * html #dialogbg {
            _position: absolute;
            _top: expression(offsetParent.scrollTop);
          }
          #dialogbg .dialog {
            -webkit-border-radius: 5px 5px 0 0;
               -moz-border-radius: 5px 5px 0 0;
                border-radius: 5px 5px 0 0;
            border: 1px solid #666;
            display: inline-block;
            position: absolute;
            background: white;
            text-align: left;
            overflow: hidden;
            margin: auto;
            left: 50%;
            top: 50%;
            behavior: url("PIE.htc");
            *behavior: none;
          }
          .dialog .title {
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#00aaee,endColorstr=#0066cc);
            background: #0095cd;
            background: -webkit-gradient(linear, left top, left bottom, from(#00aaee), to(#0066cc));
            background: -webkit-linear-gradient(top, #00aaee, #0066cc);
            background:    -moz-linear-gradient(top, #00aaee, #0066cc);
            background:     -ms-linear-gradient(top, #00aaee, #0066cc);
            background:      -o-linear-gradient(top, #00aaee, #0066cc);
            background:         linear-gradient(top, #00aaee, #0066cc);
            text-shadow: 0 0 1px black;
            font-weight: bold;
            line-height: 28px;
            overflow: hidden;
            cursor: move;
            color: white;
            *width: expression(this.parentNode.clientWidth);
          }
          .dialog .title div {
            padding: 0 8px;
          }
          .dialog .text,
          .dialog .content {
              margin: 20px;
          }
          .dialog .text{
            text-align: center;
          }
          .dialog .content {
            word-break: keep-all;
            white-space: nowrap;
          }
          .dialog input,
          .dialog .content {
            min-width: 200px;
            _width: 200px;
          }
          .dialog input {
            -webkit-box-sizing:border-box;
            -moz-box-sizing:border-box;
            -ms-box-sizing:border-box;
            box-sizing:border-box;
            display: block;
            width: 100%;
            *width: auto;
          }
          .dialog .btns {
            text-align: center;
            margin: 10px 5px;
          }
          .dialog .btns * {
            border: 1px solid #CCC;
            text-decoration: none;
            background: none;
            padding: 5px 20px;
            margin: 0 5px;
            color: #000;
          }
          #dialogbg, .dialog,.dialog .winbtns .size,.dialog input  {
              /*display: none ;*/
          }
          #dialogbg, .dialog {
            display: block;
          }
          /*demo3 自动提示功能*/
          .datalist {
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
            box-shadow: 2px 2px 2px #777;
            border: 1px solid black;
            background: window;
            position: absolute;
            overflow: hidden;
            cursor: default;
            color: menutext;
            z-index: 99999;
            display: none;
            font: menu;
            padding: 0;
            margin: 0;
            behavior: url("PIE.htc");
          }
          :root .datalist {
            behavior: none;
            -webkit-box-shadow: 2px 2px 2px rgba(0,0,0,.5);
               -moz-box-shadow: 2px 2px 2px rgba(0,0,0,.5);
                box-shadow: 2px 2px 2px rgba(0,0,0,.5);
          }
          .datalist li {
            line-height: 20px;
            list-style: none;
            font-size: 14px;
            padding: 0 10px;
            display: block;
          }
          .datalist li.highlight {
            background: highlight;
            color: highlighttext;
          }
          /*demo5 富文本编辑器*/
          #wrap5 {
            padding: 100px;
          }
          #wrap5 p {
            padding-bottom: 20px;
            line-height: 30px;
          }
          #wrap5 p * {
            vertical-align: middle;
          }
          button {
            padding: 0 10px;
          }
          #editor {
            border: 2px inset #ccc;
            font-family: SimSun;
            overflow: hidden;
            cursor: text;
            margin: auto;
          }
          #editor div{
            height: 500px;
            outline: none;
            padding: 10px;
          }
        </style>
        <link rel="icon" href="../favicon.ico" type="image/x-icon" />
        <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
    </head>
    
    <body>
        <h3>人人网笔试题: （涉及知识点较多）</h3>
        <div class='btn-list' id="btnCont">
          <button id="showImgBtn" class="radius-btn">图片展示</button>
          <button id="modalBtn" class="radius-btn">提示控件</button>
          <button id="inputTipsBtn" class="radius-btn">智能提示</button>
          <button id="secMenuBtn" class="radius-btn">二级菜单</button>
          <button id="onlineEditorBtn" class="radius-btn">编辑器</button>
        </div>

        <div class="demo" id="showImg">
          <h3>一、在页面的固定区域内实现图片的展示</h3>
          <img src="../images/rrt_1.png" title="题目1" alt="题目1" />
          <ol>
            <li>每点击一次右箭头，图片区域向左滚动出一张图片，反之相同； </li>
            <li>当发现图片滚动到末尾时，响应的箭头变成不可点击状态；   </li>
            <li>鼠标在图片区域内滑动滚轮，图片会随着鼠标滚轮的方向进行响应的滚动；</li>
          </ol>
          <h4>具体实现效果如下：</h4>
          <br/>
          <div id="wrap">
            <div class="thumbs" unselectable="on">
              <a class="scroll_left">←</a>
              <a class="scroll_right">→</a>
              <ul>
                <li><a href="#"><img src="../images/s4.jpg"></a></li>
                <li><a href="#"><img src="../images/twopop.jpg"></a></li>
                <li><a href="#"><img src="../images/twomm.jpg"></a></li>
                <li><a href="#"><img src="../images/girl2.jpg"></a></li>
                <li><a href="#"><img src="../images/car.jpg"></a></li>
                <li><a href="#"><img src="../images/war.jpg"></a></li>
                <li><a href="#"><img src="../images/twomm.jpg"></a></li>
                <li><a href="#"><img src="../images/girl2.jpg"></a></li>
                <li><a href="#"><img src="../images/car.jpg"></a></li>
                <li><a href="#"><img src="../images/war.jpg"></a></li>
                <li><a href="#"><img src="../images/twomm.jpg"></a></li>
                <li><a href="#"><img src="../images/girl2.jpg"></a></li>
                <li><a href="#"><img src="../images/car.jpg"></a></li>
                <li><a href="#"><img src="../images/war.jpg"></a></li>
                <li><a href="#"><img src="../images/twomm.jpg"></a></li>
                <li><a href="#"><img src="../images/girl2.jpg"></a></li>
                <li><a href="#"><img src="../images/car.jpg"></a></li>
                <li><a href="#"><img src="../images/war.jpg"></a></li>
                <li><a href="#"><img src="../images/twomm.jpg"></a></li>
                <li><a href="#"><img src="../images/girl2.jpg"></a></li>
                <li><a href="#"><img src="../images/car.jpg"></a></li>
                <li><a href="#"><img src="../images/war.jpg"></a></li>
              </ul>
            
            </div>
          </div>
        </div>

        <div class="demo" id="dialog">
          <h3>二、用  js、html、css实现一个弹出提示控件： </h3>
          <ol>
            <li>分别实现类似于系统的  alert、confirm、prompt对话框；</li>
            <li> 对话框大小根据提示内容进行自适应（有一个最小宽高），默认出现在页面的水平垂直居中的位置；</li>
            <li>对话框可拖动；  </li>
            <li>对话框中的事件模拟系统对话框的事件（例如：alert 对话框，点击确定按钮，对话框消失）；</li>
            <li> 解决IE6被 select控件遮挡的问题；</li>
          </ol>

          <h4>具体实现效果如下：</h4>
          <div id="wrap2">
            <select class="select">
              <option>看看有没有遮住对话框</option>
              <option>看看有没有遮住对话框</option>
              <option>看看有没有遮住对话框</option>
            </select>
            <br>
            请点击下面的链接弹出对框框
            <br>
            <a href="javascript:msgbox('你好，欢迎使用 Windows 8 旗舰版')">alert</a>
            <br>
            <a href="javascript:msgbox('您确定要关闭计算机吗?',function(t){alert(t)})">confirm</a>
            <br>
            <a href="javascript:msgbox('请输入您的姓名',function(t){alert(t)},'匿名')">prompt</a>
          </div>
        </div>

        <div class="demo" id="inputTips">
          <h3>三、实现 input 输入框的自动匹配</h3>
          <img src="../images/rrt_3.png" title="题目3" alt="题目3" />
          <ol>
            <li>对 input框中输入的字符进行匹配，将匹配到的内容以菜单的形式展现在  input框的下方；</li>
            <li>只针对英文字符进行匹配，并且匹配到的内容在菜单中加粗；  </li>
            <li>通过键盘上的上下箭头可以对菜单进行选择，按下回车后将选中的内容写入到 input框中；</li>
          </ol>
          <h5>input 输入框自动匹配的其他方式， 请访问<a href="./zxxAutoComplete.html" alt="张鑫旭自动填充邮箱代码实现">张鑫旭自动填充邮箱代码实现</a></h5>
          <h4>具体实现效果如下：</h4>
          <br/>

          <div id="wrap3">
            <input type="email" list="url_list" id="autoInput" autofocus="" autocomplete="off">
            <datalist id="url_list">
              <option label="gucong@gmail.com" value="mailto:gucong@gmail.com">
              </option><option label="gucongbbs@163.com" value="mailto:gucongbbs@163.com">
              </option><option label="gucong.student@sina.com" value="mailto:gucong.student@sina.com">
              </option><option label="gucong520@hotmail.com" value="mailto:gucong520@hotmail.com">
              </option><option label="gucong@foxmail.com" value="mailto:gucong@foxmail.com">
              </option><option label="35803719@qq.com" value="mailto:35803719@qq.com">
              </option><option label="64272001@qq.com" value="mailto:64272001@qq.com">
              </option>
            </datalist>
            <br>
            请输入gucong来作为测试数据
          </div>

        </div>

        <div class="demo" id="inputTips">
          <h3>四、在页面上实现一个二级菜单控件 </h3>
          <img src="../images/rrt_4.png" title="题目4" alt="题目4" />
          <ol>
            <li>这个控件可以绑定到页面上的任意一个元素，当点击页面元素出现菜单；  </li>
            <li>菜单出现的方向根据所在页面的位置自动进行调整，例如：  </li>
            <li>一级菜单中的元素，鼠标划过后，将会在相应的位置出现二级菜单，二级菜单中的元素点击将会有事件响应   </li>
          </ol>
        </div>

        <div class="demo" id="inputTips">
          <h3>五、实现一个所见即所得编辑器（选作）  </h3>
          <p>需提供以下功能： </p>
          <ol>
            <li>字体加粗；</li>
            <li>文本左对齐、右对齐、居中； </li>
            <li>设置字体；</li>
            <li>设置字号；</li>
            <li>设置字体颜色； </li>
            <li>插入超链接；</li>
            <li>插入图片； </li>
          </ol>
          <h5>其他编辑器实现，请访问<a href="./mditorDemo.html" alt="剧中人编辑器">剧中人编辑器</a></h5>
          <h4>具体实现效果如下：</h4>
          <br/>

          <div id="wrap5">
            <p>
              对齐方式：
              <input type="radio" id="left" name="textAlign" value="left" checked="">
              <label for="left">左对齐</label>
              <input type="radio" id="center" name="textAlign" value="center">
              <label for="center">居中对齐</label>
              <input type="radio" id="right" name="textAlign" value="right">
              <label for="right">右对齐</label>
              &nbsp;
              &nbsp;
              &nbsp;
              <input type="checkbox" id="bold" name="fontWeight" value="bold">
              <label for="bold"><b>字体加粗</b></label>
              &nbsp;
              &nbsp;
              &nbsp;
              <button id="lnk">插入超链接</button>
              <button id="img">插入图片</button>
              <br>
              设置字体
              <select id="fontFamily">
                <option value="SimSun" selected="">宋体</option>
                <option value="NSimSun" selected="">新宋体</option>
                <option value="SimHei" selected="">黑体</option>
                <option value="FangSong">仿宋</option>
                <option value="FangSong_GB2312">仿宋_GB2312</option>
                <option value="KaiTi">楷体</option>
                <option value="KaiTi_GB2312">楷体_GB2312</option>
              </select>
              &nbsp; 设置字号
              <select id="fontSize">
                <option selected="">12px</option>
                <option>14px</option>
                <option>16px</option>
                <option>18px</option>
                <option>20px</option>
              </select>
              &nbsp; 设置字体颜色:
              <select id="color">
                <option selected="">black
                </option><option>silver</option>
                <option>gray</option>
                <option>white</option>
                <option>maroon</option>
                <option>red</option>
                <option>purple</option>
                <option>fuchsia</option>
                <option>green</option>
                <option>lime</option>
                <option>olive</option>
                <option>yellow</option>
                <option>navy</option>
                <option>blue</option>
                <option>teal</option>
                <option>aqua</option>
              </select>
            </p>
            <div id="editor">
              <div contenteditable="" style="color: black; font-size: 12px; font-family: SimHei;"></div>
            </div>
          </div>

        </div>
        
        <script src="../utils/base.js" type="text/javascript"></script>
        <script type="text/javascript" src = "./base.js"></script>
        <script type="text/javascript">
          var btn_list = document.getElementsByClassName('radius-btn');

          function init(){
            var i , len , btn_item;
            // 默认显示第一项
            showDemoByIndex(0);
            
            // 初始化按钮事件
            for (i = 0, len = btn_list.length; i < len; i++) {
              btn_item = btn_list[i];
              btn_item.setAttribute('data-no', i);
              // 闭包实现块级作用域
              btn_item.onclick = showDemoByIndex;
            }
            // demo1事件触发
            demo1();
            // demo3 事件触发
            autoComplete();
            // demo5 事件触发
            onlineEditor();
            // 其他demo隐藏， 对应下标demo出现
            function showDemoByIndex(index){
              var  i , len, _demo, demo_list = document.getElementsByClassName('demo');
              if (index == null || demo_list.length == 0) {
                return false;
              }else if ((typeof index) != 'number'){
                index = parseInt(this.getAttribute('data-no'), 10);
              }

              for (i = 0, len = demo_list.length; i < len; i++) {
                _demo = demo_list[i];
                _demo.style.display = 'none';
              }
              if (demo_list[index] && demo_list[index].style) {
                demo_list[index].style.display = 'block';
              }
            }

          }
          init();

          // demo1逻辑代码
          function demo1(){
            document.realy(function($){
              var thumbs = document.querySelector(".thumbs"),
                left = thumbs.querySelector(".scroll_left"),
                right = thumbs.querySelector(".scroll_right"),
                cont = thumbs.querySelector("ul"),
                items = cont.querySelectorAll("li");
              //console.log(scrollStep);

              function scrollFun(val){
                val = cont.scrollLeft += (items[1].offsetLeft - items[0].offsetLeft) * val;
                if(val<=0){
                  $.addClass(left, "disabled");
                }else if (val >= (cont.scrollWidth - cont.clientWidth)){
                  $.addClass(right, "disabled");
                }
              }

              function sLeft(){
                scrollFun(-1);
                $.delClass(right, "disabled");
                return false;
              }
              
              function sRight(){
                scrollFun(1);
                $.delClass(left, "disabled");
                return false;
              }

              left.onclick = sLeft;
              right.onclick = sRight;

              EventUtil.addHandler(cont, "onmousewheel" in cont ? "mousewheel" : "DOMMouseScroll", function(e){
                if(( e.detail || -e.wheelDelta) > 0){
                  sRight();
                }else{
                  sLeft();
                }
                e.preventDefault();
                return false;
              });
              
            });//realy
          }//demo1

          // demo2 对话框脚本
          function msgbox(msg, fun, text){
            var dialogbg = document.querySelector("#dialogbg");
            if(!dialogbg){
              dialogbg = document.createElement("div");
              dialogbg.id = "dialogbg";
              document.body.appendChild(dialogbg);
            }
            dialogbg.innerHTML = '<div class="bgcolor"></div><div class="dialog"><div class="title" unselectable="on"><div>消息</div></div><div class="content"></div><div class="text"><input type="text"></div><div class="btns"><button class="ok">确定</button><button class="cancel">取消</button></div></div>';
            
            dialogbg.querySelector(".content").innerHTML = msg || "&nbsp;";
            function hide( sel ){
              dialogbg.querySelector(sel).style.display = "none";
            }
            var btnOk = dialogbg.querySelector(".ok"),
              btnCancel = dialogbg.querySelector(".cancel");
            if(fun){
              if(text == undefined){
                hide(".text");
                btnOk.onclick = function(){
                  fun(true);
                }
                btnCancel.onclick = function(){
                  fun(false);
                }
              }else{
                var textbox = dialogbg.querySelector("input");
                textbox.value = text;
                btnOk.onclick = function(){
                  fun.call(textbox, textbox.value);
                }
              }
            }else{
              hide(".cancel");
              hide(".text");
            }

            function btnClose(){
              dialogbg.style.display = "none";
            }

            EventUtil.addHandler(btnOk, 'click', btnClose);
            EventUtil.addHandler(btnCancel, 'click', btnClose);

            dialogbg.style.display = "block";

            var dialog = dialogbg.querySelector(".dialog");
            dialog.style.left = (dialogbg.offsetWidth - dialog.offsetWidth) / 2 + "px";
            dialog.style.top = (dialogbg.offsetHeight - dialog.offsetHeight) / 2 + "px";
            drag(dialog, dialog.querySelector(".title"));
          }
          function drag(dialog, titleBar){
            var onDrag,
              pos = {},
              dialogbg = document.querySelector("html");

            EventUtil.addHandler(titleBar, "mousedown", function(e){
              pos.left = dialog.offsetLeft;
              pos.top = dialog.offsetTop;
              pos.x = e.pageX;
              pos.y = e.pageY;
              onDrag = true;
            });
            EventUtil.addHandler(dialogbg, "mousemove", function(e){
              if(onDrag){
                dialog.style.left = (pos.left + e.pageX - pos.x) + "px";
                dialog.style.top = (pos.top + e.pageY - pos.y) + "px";
              }
            });

            titleBar.onselectstart = function(){
              return false;
            }

            dialogbg.onmouseup = function(){
              onDrag = false;
            }
          }
          // demo3 自动补全
          function autoComplete(){
            // document.createElement("datalist");
            function autocomplete(textbox){
              var $ = window.xq;
              textbox = document.querySelector(textbox);
              var datalist = document.getElementById(textbox.getAttribute("list")),
                optList = datalist.children,
                datalist = document.createElement("ul"),
                demo3_dom = document.getElementById("wrap3");

              $.each(optList, function(){
                var li = document.createElement("li");
                li.setAttribute("label" ,this.getAttribute("label"));
                li.setAttribute("value" ,this.getAttribute("value"));
                datalist.appendChild(li);
              });
              
              textbox.setAttribute("list", "");
              $.addClass(datalist, "datalist");
              demo3_dom.appendChild(datalist);

              textbox.autocomplete="off";
              EventUtil.addHandler(textbox, "keydown", function(e){
                switch(e.keyCode) {
                  case 38: // up
                    e.preventDefault();
                    moveSelect(-1);
                    break;
                  case 40: // down
                    e.preventDefault();
                    moveSelect(1);
                    break;
                  case 9:  // tab
                  case 13: // return
                    var opt = datalist.querySelector(".highlight");
                    if(opt){
                      selectOpt(opt)
                      e.preventDefault();
                      return false;
                    }
                    break;
                  default:
                    window.setTimeout(onChange,0);;
                }
              });

              function onChange() {
                if(textbox.value){
                  optList = [];
                  var match = new RegExp( textbox.value , "ig"),
                  pos = $.findPos(textbox),
                  count = 0;
                  $.each(datalist.children, function(){
                    var str = this.getAttribute("label");
                    if(match.test(str)){
                      this.innerHTML = str.replace(match, function(str){
                        return "<b>" + str + "</b>"
                      });
                      this.style.display = "block";
                      optList[count] = this;
                      count++;
                    }else{
                      this.style.display = "none";
                    }
                  });
                  datalist.style.display = count ? "block" : "none";
                  datalist.style.left = pos.x + "px";
                  datalist.style.top = pos.y + textbox.offsetHeight + "px";
                } else {
                  datalist.style.display = "none";
                }
              }
              function filter(elm){
                return /li/i.test(elm.tagName) ? elm : null;
              }

              function moveSelect(setp){
                var sel = datalist.querySelector(".highlight"),
                index;
                if(sel){
                  $.each(optList,function(i){
                    if(sel == this){
                      index = i;
                      return false;
                    }
                  });
                } else {
                  index = optList.length * -setp;
                }
                index += setp
                if(index < 0){
                  index = 0;
                } else if(index >= optList.length){
                  index = optList.length - 1;
                }
                hoverOpt(optList[index]);
                
              }

              function selectOpt(elm){
                elm = filter(elm);
                if(elm){
                  textbox.value = elm.getAttribute("value");
                }
                datalist.style.display = "none";
              }

              function hoverOpt(elm){
                elm = filter(elm);
                $.each(datalist.children, function(){
                  if(this == elm){
                    $.addClass(this, "highlight");
                  }else{
                    $.delClass(this, "highlight");
                  }
                });
              }

              EventUtil.addHandler(datalist, "click", function(e){
                selectOpt(e.target);
              });

              EventUtil.addHandler(datalist, "mouseover", function(e){
                hoverOpt(e.target);
                // 全局标志位， 鼠标在ul标签内blur事件失效
                $.blur_able = false;
              });
              EventUtil.addHandler(datalist, "mouseout", function(e){
                // 全局标志位， 鼠标不在ul标签内blur事件生效
                $.blur_able = true;
              });

              EventUtil.addHandler(textbox, "input", onChange);
              EventUtil.addHandler(textbox, "blur", function(){
                if ($.blur_able) {
                  datalist.style.display = "none";
                }
              });

            }

            document.realy(function($){
              autocomplete("#autoInput");
            });
          }

          // demo5 富文本编辑器
          function onlineEditor(){
            window.onload = function(){
              var editor = document.getElementById("editor").children[0];
              var setting = {
                'left': '',
                'center': '',
                'right': ''
              };
              function setBtn(id, styleName){
                var elm = document.getElementById(id);
                elm.onclick = function(){
                  editor.style[styleName] = setting[id] = !setting[id] ? id : "";
                }
              }

              //setBtn("bold", "fontWeight");
              setBtn("left", "textAlign");
              setBtn("center", "textAlign");
              setBtn("right", "textAlign");

              function setMenu(id, styleName){
                var elm = document.getElementById(id);
                function change(){
                  editor.style[id] = elm.value || elm.children[elm.selectedIndex].innerHTML;
                }
                change();
                elm.onchange = change;
              }

              setMenu("color");
              setMenu("fontSize");
              setMenu("fontFamily");
              
              function setChecked(id, styleName){
                var elm = document.getElementById(id);
                function change(){
                  editor.style[elm.name] = elm.checked ? this.value : "";
                }
                change();
                elm.onchange = elm.onpropertychange = change;
              }
              
              setChecked("bold");
              setChecked("left");
              setChecked("center");
              setChecked("right");
              var link = document.getElementById("link"),
                img = document.getElementById("img");
              
              document.getElementById("img").onclick = function(){
                var url = prompt("请输入图片url", "http://"),
                  img;
                if(url){
                  img = new Image();
                  img.src = url;
                  editor.appendChild(img)
                }
              }

              document.getElementById("lnk").onclick = function(){
                var url = prompt("请输入链接url", "http://"),
                  lnk;
                if(url){
                  lnk = document.createElement("a");
                  lnk.href = url;
                  lnk.innerHTML = prompt("请输入链接文字或者点击取消", "") || url;
                  editor.appendChild(lnk)
                }
              }
            };
          }

        </script>

    </body>
</html>